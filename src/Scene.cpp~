#include "Scene.h"

void Scene::init()
{
	camera = std::make_unique<Camera>();
  
	cubeRender = std::make_unique<CubeRenderComponent>();
	cubeGrassTexture = std::make_unique<GrassTextureComponent>();
	cubeShader = std::make_unique<ShaderComponent>();
	cubeBuffer = std::make_unique<BufferComponent>();

	cubeMesh = std::make_shared<Cube>(window, std::move(cubeRender), std::move(cubeGrassTexture), std::move(cubeShader), std::move(cubeBuffer));

	camera->init();
	cubeMesh->init();
}

void Scene::render()
{
	cubeMesh->render();

	/* Camera Free look */
//	cameraMoving.moveCameraWithMouse(*camera);
  	cameraMoving.moveCameraWithArrows(window, *camera);
	setView();
}

void Scene::handleInput()
{
	camera->handleInput(window);
}

void Scene::setView()
{
  	cubeMesh->getMVP().setView(camera->getCameraPos(), camera->getCameraPos() + camera->getCameraFront(), camera->getCameraUp());
}
